function NeighborhoodViewModel(){function e(e,r){if(r==google.maps.places.PlacesServiceStatus.OK){var a=Map.getMap(),n=new Marker(e[0],a);n.setInfoWindow(n.title),o.markers.push(n),o.locationLat("")}}var o=this;ko.bindingHandlers.mapBinder={init:function(e,o,r,a){Map.setMap(o,e)}},o.centerMap=ko.observable(Map.getMapCenter()),o.mapDimensions=ko.observable(Map.getMapDimensions()),o.markers=ko.observableArray([]),o.locationLat=ko.observable(""),o.addMarkerOnMap=function(){var r=Map.getSearchService(),a={query:o.locationLat()};r.textSearch(a,e)},o.toggle=ko.observable(!0),o.titleSearch=ko.observable(""),o.filteredMarkers=this.markers.filterByProperty("visible",!0),o.markerToggler=function(e){for(var r in o.markers()){var a=o.markers()[r];a.isVisible(null!=a.title().match(e))}},this.toggle.subscribe(function(e){o.markerToggler(e?"":null)}),this.toggleMarkersForSearch=function(e){var r=new RegExp(e,"i");o.markerToggler(r)},o.titleSearch.subscribe(o.toggleMarkersForSearch)}ko.observableArray.fn.filterByProperty=function(e,o){return ko.pureComputed(function(){for(var r=this(),a=[],n=0;n<r.length;n++){var t=r[n];ko.unwrap(t[e])===o&&a.push(t)}return a},this)};var Map={setMap:function(e,o){var r=ko.utils.unwrapObservable(e()),a=new google.maps.LatLng(ko.utils.unwrapObservable(r.lat),ko.utils.unwrapObservable(r.lng)),n={center:a,zoom:13};this.map=new google.maps.Map(o,n),window.mapBounds=new google.maps.LatLngBounds,this.searchService=new google.maps.places.PlacesService(this.map)},getMap:function(){return this.map},getSearchService:function(){return this.searchService},getMapCenter:function(){return{lat:ko.observable(40.7127),lng:ko.observable(-74.0059)}},getMapDimensions:function(){return{width:"100%",height:"500px"}}},Marker=function(e,o){var r=e.geometry.location.lat(),a=e.geometry.location.lng(),n=e.formatted_address,t=this;t.icon=e.icon,t.title=ko.observable(n),t.name=e.name,t.content=ko.observable(""),t.infolink=ko.observable("https://en.wikipedia.org/wiki/"+t.name),$.ajax({url:"https://en.wikipedia.org/w/api.php?action=query&prop=extracts&format=json&exintro=&titles="+t.name,type:"GET",crossDomain:!0,dataType:"jsonp",success:function(e){var o=Object.keys(e.query.pages)[0];t.content($($(e.query.pages[o].extract)[0].innerHTML).text())},error:function(){alert("Failed!")}}),t.googleMarker=new google.maps.Marker({position:new google.maps.LatLng(r,a),animation:google.maps.Animation.DROP,icon:t.icon,map:o}),t.setInfoWindow=function(e){var r=new google.maps.InfoWindow({content:t.title()});google.maps.event.addListener(t.googleMarker,"click",function(){r.content=t.content(),r.open(o,t.googleMarker)})},t.isVisible=ko.observable(!1),t.isVisible.subscribe(function(e){t.googleMarker.setMap(e?o:null)}),t.isVisible(!0);var i=window.mapBounds;i.extend(new google.maps.LatLng(r,a)),o.fitBounds(i),o.setCenter(i.getCenter())};ko.applyBindings(NeighborhoodViewModel);
//# sourceMappingURL=all.min.js.map