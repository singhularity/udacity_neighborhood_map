function NeighborhoodViewModel(){function e(e,r){if(r==google.maps.places.PlacesServiceStatus.OK){var a=Map.getMap(),t=new Marker(e[0],a);t.setInfoWindow(t.title),o.markers.push(t),o.locationLat("")}}var o=this;ko.bindingHandlers.mapBinder={init:function(e,o,r,a){Map.setMap(o,e)}},o.centerMap=ko.observable(Map.getMapCenter()),o.markers=ko.observableArray([]),o.locationLat=ko.observable(""),o.addMarkerOnMap=function(){var r=Map.getSearchService(),a={query:o.locationLat()};r.textSearch(a,e)},o.toggle=ko.observable(!0),o.titleSearch=ko.observable(""),o.filteredMarkers=this.markers.filterByProperty("visible",!0),o.markerToggler=function(e){for(var r in o.markers()){var a=o.markers()[r];a.isVisible(null!=a.title().match(e))}},this.toggle.subscribe(function(e){o.markerToggler(e?"":null)}),this.toggleMarkersForSearch=function(e){var r=new RegExp(e,"i");o.markerToggler(r)},o.titleSearch.subscribe(o.toggleMarkersForSearch)}ko.observableArray.fn.filterByProperty=function(e,o){return ko.pureComputed(function(){for(var r=this(),a=[],t=0;t<r.length;t++){var n=r[t];ko.unwrap(n[e])===o&&a.push(n)}return a},this)};var Map={setMap:function(e,o){var r=ko.utils.unwrapObservable(e()),a=new google.maps.LatLng(ko.utils.unwrapObservable(r.lat),ko.utils.unwrapObservable(r.lng)),t={center:a,zoom:13};this.map=new google.maps.Map(o,t),window.mapBounds=new google.maps.LatLngBounds,this.searchService=new google.maps.places.PlacesService(this.map)},getMap:function(){return this.map},getSearchService:function(){return this.searchService},getMapCenter:function(){return{lat:ko.observable(40.7127),lng:ko.observable(-74.0059)}}},Marker=function(e,o){var r=e.geometry.location.lat(),a=e.geometry.location.lng(),t=e.formatted_address,n=this;n.title=ko.observable(t),n.name=e.name,n.content=ko.observable(""),n.infolink=ko.observable("https://en.wikipedia.org/wiki/"+n.name),$.ajax({url:"https://en.wikipedia.org/w/api.php?action=query&prop=extracts&format=json&exintro=&titles="+n.name,type:"GET",crossDomain:!0,dataType:"jsonp",success:function(e){var o=Object.keys(e.query.pages)[0];n.content($($(e.query.pages[o].extract)[0].innerHTML).text())},error:function(){alert("Failed!")}}),n.googleMarker=new google.maps.Marker({position:new google.maps.LatLng(r,a),animation:google.maps.Animation.DROP,map:o}),n.setInfoWindow=function(e){var r=new google.maps.InfoWindow({content:n.title()});google.maps.event.addListener(n.googleMarker,"click",function(){r.content=n.content(),r.open(o,n.googleMarker)})},n.isVisible=ko.observable(!1),n.isVisible.subscribe(function(e){n.googleMarker.setMap(e?o:null)}),n.isVisible(!0);var i=window.mapBounds;i.extend(new google.maps.LatLng(r,a)),o.fitBounds(i),o.setCenter(i.getCenter())};ko.applyBindings(NeighborhoodViewModel);
//# sourceMappingURL=all.min.js.map