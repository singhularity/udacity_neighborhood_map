function NeighborhoodViewModel(){function e(e,n){if(n==google.maps.places.PlacesServiceStatus.OK){var t=Map.getMap(),r=new Marker(e[0],t);r.setInfoWindow(r.title),o.markers.push(r),o.visibleMarkersCount(o.visibleMarkersCount()+1),o.locationLat("")}}var o=this;ko.bindingHandlers.mapBinder={init:function(e,o,n,t){Map.setMap(o,e)}},o.centerMap=ko.observable(Map.getMapCenter()),o.mapDimensions=ko.observable(Map.getMapDimensions()),o.markers=ko.observableArray([]),o.locationLat=ko.observable(""),o.addMarkerOnMap=function(){var n=Map.getSearchService(),t={query:o.locationLat()};n.textSearch(t,e)},o.toggle=ko.observable(!0),o.titleSearch=ko.observable(""),o.filteredMarkers=this.markers.filterByProperty("visible",!0),o.visibleMarkersCount=ko.observable(0),o.showDummyCard=ko.computed(function(){return 0==o.visibleMarkersCount()&&o.toggle}),o.markerToggler=function(e){o.visibleMarkersCount(0);for(var n in o.markers()){var t=o.markers()[n];t.isVisible(null!=t.title().match(e)),t.isVisible()&&o.visibleMarkersCount(o.visibleMarkersCount()+1)}},this.toggle.subscribe(function(e){o.markerToggler(e?"":null)}),this.toggleMarkersForSearch=function(e){var n=new RegExp(e,"i");o.markerToggler(n)},o.titleSearch.subscribe(o.toggleMarkersForSearch)}ko.observableArray.fn.filterByProperty=function(e,o){return ko.pureComputed(function(){for(var n=this(),t=[],r=0;r<n.length;r++){var i=n[r];ko.unwrap(i[e])===o&&t.push(i)}return t},this)};var Map={setMap:function(e,o){var n=ko.utils.unwrapObservable(e()),t=new google.maps.LatLng(ko.utils.unwrapObservable(n.lat),ko.utils.unwrapObservable(n.lng)),r={center:t,zoom:13};this.map=new google.maps.Map(o,r),window.mapBounds=new google.maps.LatLngBounds,this.searchService=new google.maps.places.PlacesService(this.map),this.infoWindow=new google.maps.InfoWindow({content:""})},getMap:function(){return this.map},getSearchService:function(){return this.searchService},getMapCenter:function(){return{lat:ko.observable(40.7127),lng:ko.observable(-74.0059)}},getMapDimensions:function(){var e=$("main").height()+40;return{width:"100%",height:""+e+"px"}},getInfoWindow:function(){return this.infoWindow}},Marker=function(e,o){var n=e.geometry.location.lat(),t=e.geometry.location.lng(),r=e.formatted_address,i=this;i.icon=e.icon,i.title=ko.observable(r),i.name=e.name,i.content=ko.observable(""),i.infolink=ko.observable("https://en.wikipedia.org/wiki/"+i.name),$.ajax({url:"https://en.wikipedia.org/w/api.php?action=query&prop=extracts&format=json&exintro=&titles="+i.name,type:"GET",crossDomain:!0,dataType:"jsonp",success:function(e){try{var o=Object.keys(e.query.pages)[0];i.content($($(e.query.pages[o].extract)[0].innerHTML).text())}catch(n){console.log("Failed to parse content about location : "+i.name),i.content("Could not get additional information.")}},error:function(){console.log("Failed to parse content about location : "+i.name),i.content("Could not get additional information.")}}),i.googleMarker=new google.maps.Marker({position:new google.maps.LatLng(n,t),animation:google.maps.Animation.DROP,icon:i.icon,map:o}),i.setInfoWindow=function(e){google.maps.event.addListener(i.googleMarker,"click",function(){infoWindow=Map.getInfoWindow(),infoWindow.setContent(i.content()),infoWindow.open(o,i.googleMarker)})},i.isVisible=ko.observable(!1),i.isVisible.subscribe(function(e){i.googleMarker.setMap(e?o:null)}),i.isVisible(!0);var a=window.mapBounds;a.extend(new google.maps.LatLng(n,t)),o.fitBounds(a),o.setCenter(a.getCenter())};ko.applyBindings(NeighborhoodViewModel),$(window).resize(function(){google.maps.event.trigger(Map.getMap(),"resize")}),Offline.options={checkOnLoad:!0,interceptRequests:!0};var run=function(){"up"===Offline.state&&Offline.check()};setInterval(run,5e3);
//# sourceMappingURL=all.min.js.map